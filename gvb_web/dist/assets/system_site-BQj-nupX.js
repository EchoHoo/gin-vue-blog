import{c as d,r as D,b as j,M as k,d as C,e as n,f as l,w as s,N as G,g as b,O as I,h as o,o as M,s as w,i as Q}from"./index-DhileAJB.js";import{g as R}from"./data-DE6nU9bg.js";const S={class:"gvb_settings_bg"},Y={class:"gvb_settings_box"},N=n("div",{class:"gvb_settings_head"},[n("h3",null,"网站设置")],-1),B={class:"gvb_setting_body"},H=["src"],V=["src"],W=n("div",{class:"gvb_settings_head"},[n("h3",null,"个人信息")],-1),A={class:"gvb_setting_body"},L=n("div",{class:"gvb_settings_head"},[n("h3",null,"链接地址")],-1),O={class:"gvb_setting_body"},E={class:"gvb_setting_btn"},z={__name:"system_site",setup(F){d(null);const a=D({create_at:"",bei_an:"",title:"",qq_image:"",version:"",email:"",wechat_image:"",name:"",job:"",addr:"",slogan:"",slogan_en:"",web:"",bilibili_url:"",gitee_url:"",github_url:""}),_=j(),g=d(k("2023-08-19","YYYY-MM-DD"));async function y(){a.create_at=R(g.value.toDate());let i=await G(a);if(i.code){b.error(i.msg);return}b.success(i.msg),h()}function f(i,e){if(i.file.status==="done"){let u=i.file.response;if(u.code){b.error(u.msg);return}let r=u.data[0].file_name;r.startsWith("/")||(r="/"+r),e==="qq"&&(a.qq_image=r),e==="wechat"&&(a.wechat_image=r)}}const p=d(null),v=d(null),c=d(null);async function h(){let i=await I();Object.assign(a,i.data),g.value=k(i.data.create_at);try{await p.value.validate(),await v.value.validate(),await c.value.validate()}catch{return}}return h(),(i,e)=>{const u=o("a-input"),r=o("a-form-item"),U=o("a-date-picker"),q=o("a-upload"),m=o("a-form"),x=o("a-button");return M(),C("div",S,[n("div",Y,[N,n("div",B,[l(m,{model:a,name:"basic",ref_key:"formSiteRef",ref:p,"label-col":{span:3},"wrapper-col":{span:21},"label-align":"left",autocomplete:"off"},{default:s(()=>[l(r,{label:"网站标题",name:"title","has-feedback":"",rules:[{required:!0,message:"请输入网站标题",trigger:"blur"}]},{default:s(()=>[l(u,{value:a.title,"onUpdate:value":e[0]||(e[0]=t=>a.title=t),placeholder:"请输入网站标题"},null,8,["value"])]),_:1}),l(r,{label:"slogan",name:"slogan","has-feedback":"",rules:[{required:!0,message:"请输入slogan",trigger:"blur"}]},{default:s(()=>[l(u,{value:a.slogan,"onUpdate:value":e[1]||(e[1]=t=>a.slogan=t),placeholder:"请输入网站口号"},null,8,["value"])]),_:1}),l(r,{label:"英文slogan",name:"slogan_en","has-feedback":"",rules:[{required:!0,message:"请输入英文slogan",trigger:"blur"}]},{default:s(()=>[l(u,{value:a.slogan_en,"onUpdate:value":e[2]||(e[2]=t=>a.slogan_en=t),placeholder:"请输入英文网站口号"},null,8,["value"])]),_:1}),l(r,{label:"备案",name:"bei_an","has-feedback":"",rules:[{required:!0,message:"请输入备案",trigger:"blur"}]},{default:s(()=>[l(u,{value:a.bei_an,"onUpdate:value":e[3]||(e[3]=t=>a.bei_an=t),placeholder:"请输入备案信息"},null,8,["value"])]),_:1}),l(r,{label:"网站版本",name:"version","has-feedback":"",rules:[{required:!0,message:"请输入网站版本",trigger:"blur"}]},{default:s(()=>[l(u,{value:a.version,"onUpdate:value":e[4]||(e[4]=t=>a.version=t),placeholder:"请输入网站版本"},null,8,["value"])]),_:1}),l(r,{label:"建站日期",name:"created_at","has-feedback":"",rules:[{}]},{default:s(()=>[l(U,{value:g.value,"onUpdate:value":e[5]||(e[5]=t=>g.value=t),placeholder:"请选择建站日期"},null,8,["value"])]),_:1}),l(r,{label:"QQ",name:"qq_image","has-feedback":"",rules:[{required:!0,message:"请输入QQ",trigger:"blur"}]},{default:s(()=>[l(u,{value:a.qq_image,"onUpdate:value":e[6]||(e[6]=t=>a.qq_image=t),placeholder:"请输入QQ号"},null,8,["value"]),l(q,{name:"images","list-type":"picture-card",class:"gvb_image_upload","show-upload-list":!1,action:"/api/images",headers:{token:w(_).userInfo.token},onChange:e[7]||(e[7]=t=>f(t,"qq"))},{default:s(()=>[n("img",{src:a.qq_image,width:"120",height:"120",style:{"margin-top":"10px"},alt:""},null,8,H)]),_:1},8,["headers"])]),_:1}),l(r,{label:"Wechat",name:"wechat_image","has-feedback":"",rules:[{required:!0,message:"请输入Wechat",trigger:"blur"}]},{default:s(()=>[l(u,{value:a.wechat_image,"onUpdate:value":e[8]||(e[8]=t=>a.wechat_image=t),placeholder:"请输入微信号"},null,8,["value"]),l(q,{name:"images","list-type":"picture-card",class:"gvb_image_upload","show-upload-list":!1,action:"/api/images",headers:{token:w(_).userInfo.token},onChange:e[9]||(e[9]=t=>f(t,"wechat"))},{default:s(()=>[n("img",{src:a.wechat_image,width:"120",height:"120",style:{"margin-top":"10px"},alt:""},null,8,V)]),_:1},8,["headers"])]),_:1})]),_:1},8,["model"])]),W,n("div",A,[l(m,{model:a,name:"basic",ref_key:"formMyInfoRef",ref:v,"label-col":{span:3},"wrapper-col":{span:21},"label-align":"left",autocomplete:"off"},{default:s(()=>[l(r,{label:"昵称",name:"name","has-feedback":"",rules:[{required:!0,message:"请输入昵称",trigger:"blur"}]},{default:s(()=>[l(u,{value:a.name,"onUpdate:value":e[10]||(e[10]=t=>a.name=t),placeholder:"请输入昵称"},null,8,["value"])]),_:1}),l(r,{label:"工作",name:"job","has-feedback":"",rules:[{required:!0,message:"请输入工作",trigger:"blur"}]},{default:s(()=>[l(u,{value:a.job,"onUpdate:value":e[11]||(e[11]=t=>a.job=t),placeholder:"请输入工作"},null,8,["value"])]),_:1}),l(r,{label:"地址",name:"addr","has-feedback":"",rules:[{required:!0,message:"请输入地址",trigger:"blur"}]},{default:s(()=>[l(u,{value:a.addr,"onUpdate:value":e[12]||(e[12]=t=>a.addr=t),placeholder:"请输入地址"},null,8,["value"])]),_:1}),l(r,{label:"邮箱",name:"email","has-feedback":"",rules:[{required:!0,message:"请输入邮箱",trigger:"blur"}]},{default:s(()=>[l(u,{value:a.email,"onUpdate:value":e[13]||(e[13]=t=>a.email=t),placeholder:"请输入邮箱"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),L,n("div",O,[l(m,{model:a,name:"basic",ref_key:"formLinkRef",ref:c,"label-col":{span:3},"wrapper-col":{span:21},"label-align":"left",autocomplete:"off"},{default:s(()=>[l(r,{label:"网站地址",name:"web","has-feedback":"",rules:[{required:!0,message:"请输入网站地址",trigger:"blur"}]},{default:s(()=>[l(u,{value:a.web,"onUpdate:value":e[14]||(e[14]=t=>a.web=t),placeholder:"请输入网站地址"},null,8,["value"])]),_:1}),l(r,{label:"哔哩哔哩",name:"bilibili_url","has-feedback":"",rules:[{required:!0,message:"请输入哔哩哔哩地址",trigger:"blur"}]},{default:s(()=>[l(u,{value:a.bilibili_url,"onUpdate:value":e[15]||(e[15]=t=>a.bilibili_url=t),placeholder:"请输入哔哩哔哩地址"},null,8,["value"])]),_:1}),l(r,{label:"Gitee",name:"gitee_url","has-feedback":"",rules:[{required:!0,message:"请输入Gitee地址",trigger:"blur"}]},{default:s(()=>[l(u,{value:a.gitee_url,"onUpdate:value":e[16]||(e[16]=t=>a.gitee_url=t),placeholder:"请输入Gitee地址"},null,8,["value"])]),_:1}),l(r,{label:"GitHub",name:"github_url","has-feedback":"",rules:[{required:!0,message:"请输入GitHub地址",trigger:"blur"}]},{default:s(()=>[l(u,{value:a.github_url,"onUpdate:value":e[17]||(e[17]=t=>a.github_url=t),placeholder:"请输入GitHub地址"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),n("div",E,[l(x,{type:"primary",onClick:e[18]||(e[18]=t=>y())},{default:s(()=>[Q("更新")]),_:1})])])])}}};export{z as default};
