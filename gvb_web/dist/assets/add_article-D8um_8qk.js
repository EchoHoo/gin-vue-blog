import{E as w}from"./MdEditor-Co7qFvn8.js";/* empty css              */import{u as y}from"./image_api-CdPAa1or.js";import{h as k}from"./article_api-BZl38PjZ.js";import{b as U,a as A,c as E,r as c,x as O,d as S,f as u,s as V,g as m,o as x}from"./index-Sy54AUqK.js";import{_ as I}from"./gvb_article_model-CYamKHcH.js";import"./index-CYFOkxZD.js";import"./tag_api-DDYv3k3r.js";const R={__name:"add_article",setup(h){const d=U(),p=A(),o=E(!1),f=async(t,e)=>{const b=(await Promise.all(t.map(n=>y(n)))).map(n=>{const s=n.data;return Array.isArray(s)&&s.length>0?s[0].file_name:""}).filter(n=>n!=="");e(b)},v=c({content:"",title:"",abstract:"",banner_id:0,category:"",tags:[],link:"",source:""}),a=c({content:"",title:"",abstract:"",banner_id:0,category:"",tags:[],link:"",source:""});function i(t){t.ctrlKey&&t.key==="s"&&(l(),t.preventDefault())}function l(){o.value=!0}window.addEventListener("keydown",i),O(()=>{window.removeEventListener("keydown",i)});const g=(t,e)=>{l()};async function _(t){Object.assign(a,t),console.log(a),console.log(t);let e=await k(a);if(e.code){m.error(e.msg);return}m.success(e.msg),o.value=!1,Object.assign(a,v),p.push({name:"article_list"}),d.removeTab({name:"add_article"})}return(t,e)=>(x(),S("div",null,[u(I,{visible:o.value,"onUpdate:visible":e[0]||(e[0]=r=>o.value=r),onOk:_},null,8,["visible"]),u(V(w),{modelValue:a.content,"onUpdate:modelValue":e[1]||(e[1]=r=>a.content=r),onOnUploadImg:f,onOnSave:g},null,8,["modelValue"])]))}};export{R as default};
