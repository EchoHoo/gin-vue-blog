import{_ as C}from"./gvb_user_info-Htjmuczc.js";import{c as L,r as p,h as v,o,d as r,f as c,w as f,e as t,F as y,q as $,t as m,l as S,g as B,b as z,i as w,s as b,k as N,n as T}from"./index-CQKID6YZ.js";import{s as V}from"./article_api-Cui2-luC.js";const E={class:"search_text_head"},M={class:"search_text_body"},q=["onClick"],A={class:"search_title"},F=["innerHTML"],H={key:0,class:"search_text_footer"},I={__name:"gvb_text_search",setup(g){const i=L(!1),a=p({list:[],total:0}),n=p({key:"",limit:10,page:1});function d(e){var s=e.replace(/\s+/g,""),h=s.replace(/##+/g,"#");return h}function u(){i.value=!0}function _(e){let s=d(e);window.open("/article/"+s,"_blank")}async function k(){let e=await V(n);if(e.code){B.error(e.msg);return}a.list=e.data.list,a.total=e.data.count,console.log(a.list)}return(e,s)=>{const h=v("a-input-search"),x=v("a-modal");return o(),r("div",null,[c(x,{title:"全文搜索",visible:i.value,"onUpdate:visible":s[1]||(s[1]=l=>i.value=l),class:"search_modal",footer:null,width:"40%"},{default:f(()=>[t("div",E,[c(h,{value:n.key,"onUpdate:value":s[0]||(s[0]=l=>n.key=l),placeholder:"输入搜索内容","enter-button":"",size:"large",onSearch:k},null,8,["value"])]),t("div",M,[(o(!0),r(y,null,$(a.list,l=>(o(),r("div",{class:"item",onClick:K=>_(l.slug),key:l.id},[t("div",A,m(l.title),1),t("div",{class:"search_text",innerHTML:l.body},null,8,F)],8,q))),128))]),a.list.length?(o(),r("div",H," 共搜索到结果 "+m(a.total)+" 条",1)):S("",!0)]),_:1},8,["visible"]),t("i",{class:"fa fa-search",onClick:u})])}}},O={class:"gvb_nav_container"},U=t("div",{class:"logo"},[t("div",null,"LOGO")],-1),D={class:"left"},G={class:"search"},j={class:"right"},J={key:0,class:"login_btn"},W={__name:"gvb_nav",props:{is_show:{type:Boolean,default:!1}},setup(g){const i=z(),a=g,n=p({is_show:!1});async function d(){a.is_show?n.is_show=!0:window.addEventListener("scroll",u)}d();function u(){document.documentElement.scrollTop>=200?n.is_show=!0:n.is_show=!1}return(_,k)=>{const e=v("router-link");return o(),r("div",{class:T({gvb_nav:!0,show:n.is_show})},[t("div",O,[U,t("div",D,[(o(!0),r(y,null,$(b(i).navList,s=>(o(),r("span",{key:s.id},[c(e,{to:s.path},{default:f(()=>[w(m(s.title),1)]),_:2},1032,["to"])]))),128)),t("span",G,[c(I)])]),t("div",j,[b(i).userInfo.role===0?(o(),r("span",J,[c(e,{to:{name:"login",query:{redirect_url:_.$router.path}}},{default:f(()=>[w("登录")]),_:1},8,["to"])])):(o(),N(C,{key:1,class:"gvb_user_info"}))])])],2)}}};export{W as _};
