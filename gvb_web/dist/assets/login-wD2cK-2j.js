import{e as h}from"./user_api-DLmzQZL-.js";import{u as b,a as w,b as I,r as y,c as k,d as x,e,f as d,w as u,g as i,h as f,o as U,i as S,p as C,j as N}from"./index-Csyz-WVi.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L="/assets/login-DI1pDZU3.jpg";function R(a){let _=a.split(".")[1];return JSON.parse(decodeURIComponent(escape(window.atob(_.replace(/-/g,"+").replace(/_/g,"/")))))}const l=a=>(C("data-v-174ff54e"),a=a(),N(),a),V={class:"gvb_login_bg"},j=l(()=>e("img",{src:L,alt:""},null,-1)),D={class:"gvb_login_container"},T={class:"gvb_login_main"},q=l(()=>e("div",{class:"gvb_login_head"},"用户登录",-1)),A={class:"gvb_login_form"},E={class:"gvb_login_form_item"},J=l(()=>e("i",{class:"fa fa-user-o"},null,-1)),O={class:"gvb_login_form_item"},Z=l(()=>e("i",{class:"fa fa-key"},null,-1)),z={__name:"login",setup(a){const _=b(),c=w(),m=I(),s=y({user_name:"",password:""}),n=k(!1);async function g(){if(!n.value){if(n.value=!0,s.user_name===""||s.password===""){i.error("用户名或密码不能为空"),n.value=!1;return}try{let o=await h(s);if(o.code)i.error(o.msg);else{i.success(o.msg);let t=R(o.data);t.token=o.data,m.setUserInfo(t);const r=_.query.redirect_url;r?c.push({path:r}):c.push("/admin/home")}}catch{i.error("登录请求失败，请检查网络或联系管理员")}finally{n.value=!1}}}return(o,t)=>{const r=f("a-input"),v=f("a-button");return U(),x("div",V,[j,e("div",D,[e("div",T,[q,e("div",A,[e("div",E,[d(r,{placeholder:"用户名",value:s.user_name,"onUpdate:value":t[0]||(t[0]=p=>s.user_name=p)},{prefix:u(()=>[J]),_:1},8,["value"])]),e("div",O,[d(r,{placeholder:"密码",type:"password",value:s.password,"onUpdate:value":t[1]||(t[1]=p=>s.password=p)},{prefix:u(()=>[Z]),_:1},8,["value"])]),e("div",{class:"gvb_login_form_item",onClick:g},[d(v,{type:"primary",block:""},{default:u(()=>[S("登录")]),_:1})])])])])])}}},K=B(z,[["__scopeId","data-v-174ff54e"]]);export{K as default};
